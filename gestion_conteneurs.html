<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cours Interactif : Conteneurs Docker</title>
    <!-- Chargement de Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Importation de la police Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* D√©finition de la police par d√©faut */
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Style pour l'onglet actif */
        .tab-button.active {
            border-color: #2563eb; /* blue-600 */
            color: #2563eb; /* blue-600 */
            font-weight: 600;
        }
        /* Cacher les panneaux d'onglets inactifs */
        .tab-pane {
            display: none;
        }
        /* Afficher le panneau d'onglet actif */
        .tab-pane.active {
            display: block;
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800">

    <div class="container max-w-5xl mx-auto p-4 sm:p-8">
        <div class="bg-white rounded-lg shadow-2xl overflow-hidden">
            <header class="p-6 sm:p-8 bg-blue-700 text-white">
                <h1 class="text-3xl sm:text-4xl font-bold">Fonctionnement et Manipulation des Conteneurs Docker</h1>
                <p class="mt-2 text-lg text-blue-100">Un guide interactif pour r√©viser les concepts cl√©s.</p>
            </header>

            <!-- Boutons d'acc√®s (Onglets) -->
            <nav class="flex flex-wrap justify-center border-b-2 border-gray-200 bg-gray-50 p-2 sm:p-4">
                <button class="tab-button active py-3 px-4 sm:px-6 text-sm sm:text-base font-medium text-gray-600 border-b-4 border-transparent hover:text-blue-600 transition-colors duration-200" onclick="showTab(event, 'tab1')">
                    1. Image vs Conteneur
                </button>
                <button class="tab-button py-3 px-4 sm:px-6 text-sm sm:text-base font-medium text-gray-600 border-b-4 border-transparent hover:text-blue-600 transition-colors duration-200" onclick="showTab(event, 'tab2')">
                    2. Cr√©ation & Lancement
                </button>
                <button class="tab-button py-3 px-4 sm:px-6 text-sm sm:text-base font-medium text-gray-600 border-b-4 border-transparent hover:text-blue-600 transition-colors duration-200" onclick="showTab(event, 'tab3')">
                    3. Cycle de Vie
                </button>
                <button class="tab-button py-3 px-4 sm:px-6 text-sm sm:text-base font-medium text-gray-600 border-b-4 border-transparent hover:text-blue-600 transition-colors duration-200" onclick="showTab(event, 'tab4')">
                    4. Interagir
                </button>
                <button class="tab-button py-3 px-4 sm:px-6 text-sm sm:text-base font-medium text-gray-600 border-b-4 border-transparent hover:text-blue-600 transition-colors duration-200" onclick="showTab(event, 'tab5')">
                    5. Commit
                </button>
            </nav>

            <!-- Contenu des Onglets -->
            <div class="p-6 sm:p-8">

                <!-- Panneau 1: Image vs Conteneur -->
                <div id="tab1" class="tab-pane active">
                    <!-- Bloc Th√©orie -->
                    <div class="mb-6 p-4 bg-gray-50 rounded-lg border border-gray-200">
                        <h2 class="text-2xl font-semibold text-blue-600 mb-4">1. Diff√©rence Image vs Conteneur</h2>
                        <div class="prose max-w-none">
                            <ul class="list-disc list-outside space-y-2 pl-5">
                                <li>Une <strong>image</strong> est un mod√®le statique, un "snapshot" en lecture seule contenant une application et ses d√©pendances.</li>
                                <li>Un <strong>conteneur</strong> est une instance en cours d'ex√©cution d'une image. C'est l'image qui prend vie en m√©moire, avec un √©tat et un processus utilisateur.</li>
                            </ul>
                        </div>
                    </div>

                    <!-- Bloc TP -->
                    <div class="mb-6 p-4 bg-green-50 rounded-lg border border-green-200">
                        <h3 class="text-xl font-semibold text-green-800 mb-3">üí° Travaux Pratiques (TP)</h3>
                        <p class="mb-2">Lister les images pr√©sentes sur votre machine et voir la diff√©rence avec les conteneurs en cours.</p>
                        <code class="block bg-gray-800 text-white p-3 rounded-md text-sm"># 1. Voir les images que vous avez localement
docker images

# 2. Voir les conteneurs en cours d'ex√©cution
docker ps

# 3. Voir tous les conteneurs (m√™me arr√™t√©s)
docker ps -a</code>
                    </div>

                    <!-- Bloc Questionnaire -->
                    <div class="p-4 bg-purple-50 rounded-lg border border-purple-200">
                        <h3 class="text-xl font-semibold text-purple-800 mb-3">‚ùì Questionnaire</h3>
                        <p class="font-medium">Un conteneur est-il modifiable, et une image l'est-elle ?</p>
                        <p class="mt-2 text-sm text-gray-700"><strong>R√©ponse :</strong> Un conteneur est modifiable (son √©tat change), mais une image est immuable (en lecture seule). Si vous modifiez un conteneur, les changements n'affectent pas l'image d'origine.</p>
                    </div>
                </div>

                <!-- Panneau 2: Cr√©ation et Lancement -->
                <div id="tab2" class="tab-pane">
                    <!-- Bloc Th√©orie -->
                    <div class="mb-6 p-4 bg-gray-50 rounded-lg border border-gray-200">
                        <h2 class="text-2xl font-semibold text-blue-600 mb-4">2. Cr√©ation et Lancement de Conteneurs</h2>
                        <p class="mb-3">La commande de base est <code>docker run</code>.</p>
                        <h4 class="font-semibold mb-2">Options Cl√©s :</h4>
                        <ul class="list-disc list-outside space-y-2 pl-5">
                            <li><code>-i</code> (interactif) : Garde l'entr√©e standard (clavier) ouverte.</li>
                            <li><code>-t</code> (TTY) : Alloue un terminal virtuel (pseudo-TTY). (Souvent utilis√© ensemble : <code>-it</code>).</li>
                            <li><code>-d</code> (detached) : Ex√©cute le conteneur en arri√®re-plan.</li>
                            <li><code>--name &lt;NOM&gt;</code> : Attribue un nom sp√©cifique au conteneur.</li>
                            <li><code>-p &lt;PORT_HOTE&gt;:&lt;PORT_CONTENEUR&gt;</code> : Mappe un port de l'h√¥te vers le conteneur.</li>
                        </ul>
                        <h4 class="font-semibold mt-4 mb-2">Nature √âph√©m√®re :</h4>
                        <p>Les modifications dans un conteneur sont perdues s'il est supprim√©. Pour la persistance, on utilise des <strong>volumes</strong>.</p>
                    </div>

                    <!-- Bloc TP -->
                    <div class="mb-6 p-4 bg-green-50 rounded-lg border border-green-200">
                        <h3 class="text-xl font-semibold text-green-800 mb-3">üí° Travaux Pratiques (TP)</h3>
                        <p class="mb-2">Lancez un serveur web Nginx en arri√®re-plan et acc√©dez-y depuis votre navigateur.</p>
                        <code class="block bg-gray-800 text-white p-3 rounded-md text-sm"># 1. Lance le conteneur "mon-nginx" en mode d√©tach√© (-d)
# et mappe le port 8080 de votre machine au port 80 du conteneur
docker run -d --name mon-nginx -p 8080:80 nginx:latest

# 2. Ouvrez http://localhost:8080 dans votre navigateur.
# 3. Arr√™tez et supprimez le conteneur
docker stop mon-nginx
docker rm mon-nginx</code>
                    </div>

                    <!-- Bloc Questionnaire -->
                    <div class="p-4 bg-purple-50 rounded-lg border border-purple-200">
                        <h3 class="text-xl font-semibold text-purple-800 mb-3">‚ùì Questionnaire</h3>
                        <p class="font-medium">Que fait la commande <code>docker run -it ubuntu bash</code> ?</p>
                        <p class="mt-2 text-sm text-gray-700"><strong>R√©ponse :</strong> Elle cr√©e et d√©marre un conteneur √† partir de l'image <code>ubuntu</code>, vous attache √† un terminal interactif (<code>-it</code>) et ex√©cute la commande <code>bash</code>, vous donnant un shell √† l'int√©rieur du conteneur.</p>
                    </div>
                </div>
                
                <!-- Panneau 3: Cycle de Vie -->
                <div id="tab3" class="tab-pane">
                    <!-- Bloc Th√©orie -->
                    <div class="mb-6 p-4 bg-gray-50 rounded-lg border border-gray-200">
                        <h2 class="text-2xl font-semibold text-blue-600 mb-4">3. Gestion du Cycle de Vie</h2>
                        <h4 class="font-semibold mb-2">Lister les Conteneurs :</h4>
                        <ul class="list-disc list-outside space-y-2 pl-5">
                            <li><code>docker ps</code> : Affiche les conteneurs <strong>en cours d'ex√©cution</strong>.</li>
                            <li><code>docker ps -a</code> : Affiche <strong>tous</strong> les conteneurs (m√™me arr√™t√©s).</li>
                        </ul>
                        <h4 class="font-semibold mt-4 mb-2">D√©marrer / Arr√™ter :</h4>
                         <ul class="list-disc list-outside space-y-2 pl-5">
                            <li><code>docker start &lt;NOM_OU_ID&gt;</code> : D√©marre un conteneur arr√™t√©.</li>
                            <li><code>docker stop &lt;NOM_OU_ID&gt;</code> : Arr√™te un conteneur en cours.</li>
                        </ul>
                        <h4 class="font-semibold mt-4 mb-2">Supprimer un Conteneur :</h4>
                        <ul class="list-disc list-outside space-y-2 pl-5">
                            <li><code>docker rm &lt;NOM_OU_ID&gt;</code> : Supprime un conteneur <strong>arr√™t√©</strong>.</li>
                            <li><code>docker rm -f &lt;NOM_OU_ID&gt;</code> : Force la suppression (m√™me s'il est en cours).</li>
                        </ul>
                    </div>

                    <!-- Bloc TP -->
                    <div class="mb-6 p-4 bg-green-50 rounded-lg border border-green-200">
                        <h3 class="text-xl font-semibold text-green-800 mb-3">üí° Travaux Pratiques (TP)</h3>
                        <p class="mb-2">G√©rer le cycle de vie d'un conteneur <code>hello-world</code>.</p>
                        <code class="block bg-gray-800 text-white p-3 rounded-md text-sm"># 1. Cr√©ez un conteneur (il s'ex√©cute et s'arr√™te)
docker run --name test-hello hello-world

# 2. Voyez-le dans la liste des conteneurs arr√™t√©s
docker ps -a

# 3. Red√©marrez-le
docker start test-hello

# 4. Supprimez-le
docker rm test-hello</code>
                    </div>

                    <!-- Bloc Questionnaire -->
                    <div class="p-4 bg-purple-50 rounded-lg border border-purple-200">
                        <h3 class="text-xl font-semibold text-purple-800 mb-3">‚ùì Questionnaire</h3>
                        <p class="font-medium">Quelle est la diff√©rence entre <code>docker stop</code> et <code>docker rm</code> ?</p>
                        <p class="mt-2 text-sm text-gray-700"><strong>R√©ponse :</strong> <code>docker stop</code> arr√™te le conteneur (il existe toujours mais ne tourne pas). <code>docker rm</code> supprime le conteneur (il doit √™tre arr√™t√© avant d'√™tre supprim√©).</p>
                    </div>
                </div>

                <!-- Panneau 4: Interagir -->
                <div id="tab4" class="tab-pane">
                    <!-- Bloc Th√©orie -->
                    <div class="mb-6 p-4 bg-gray-50 rounded-lg border border-gray-200">
                        <h2 class="text-2xl font-semibold text-blue-600 mb-4">4. Interagir avec les Conteneurs en Cours</h2>
                        <h4 class="font-semibold mb-2">Ex√©cuter une Commande :</h4>
                        <ul class="list-disc list-outside space-y-2 pl-5">
                            <li><code>docker exec &lt;NOM_OU_ID&gt; &lt;COMMANDE&gt;</code> : Ex√©cute une commande dans un conteneur <strong>d√©j√† en cours</strong>.</li>
                            <li><strong>Exemple :</strong> <code>docker exec -it mon-nginx bash</code> ouvre un shell dans le conteneur "mon-nginx".</li>
                            <li><strong>Quitter un shell `exec` :</strong> Tapez <code>exit</code> ou <code>Ctrl + D</code>. (Pour se d√©tacher sans quitter : <code>Ctrl + P</code> puis <code>Ctrl + Q</code>).</li>
                        </ul>
                        <h4 class="font-semibold mt-4 mb-2">Consulter les Logs :</h4>
                        <ul class="list-disc list-outside space-y-2 pl-5">
                            <li><code>docker logs &lt;NOM_OU_ID&gt;</code> : Affiche les logs (sortie standard) du conteneur.</li>
                            <li><code>docker logs -f &lt;NOM_OU_ID&gt;</code> : Suit les logs en temps r√©el.</li>
                        </ul>
                    </div>

                    <!-- Bloc TP -->
                    <div class="mb-6 p-4 bg-green-50 rounded-lg border border-green-200">
                        <h3 class="text-xl font-semibold text-green-800 mb-3">üí° Travaux Pratiques (TP)</h3>
                        <p class="mb-2">Lancez un conteneur Nginx et utilisez <code>exec</code> pour voir le contenu du fichier <code>index.html</code> par d√©faut.</p>
                        <code class="block bg-gray-800 text-white p-3 rounded-md text-sm"># 1. Lancez un Nginx (s'il n'est pas d√©j√† lanc√©)
docker run -d --name mon-nginx -p 8080:80 nginx

# 2. Ex√©cutez 'cat' dans le conteneur pour lire le fichier
docker exec mon-nginx cat /usr/share/nginx/html/index.html

# 3. (Nettoyage)
docker stop mon-nginx && docker rm mon-nginx</code>
                    </div>

                    <!-- Bloc Questionnaire -->
                    <div class="p-4 bg-purple-50 rounded-lg border border-purple-200">
                        <h3 class="text-xl font-semibold text-purple-800 mb-3">‚ùì Questionnaire</h3>
                        <p class="font-medium">Quelle est la diff√©rence principale entre <code>docker run</code> et <code>docker exec</code> ?</p>
                        <p class="mt-2 text-sm text-gray-700"><strong>R√©ponse :</strong> <code>docker run</code> cr√©e un *nouveau* conteneur √† partir d'une image. <code>docker exec</code> ex√©cute une commande √† l'int√©rieur d'un conteneur *existant* et d√©j√† en cours d'ex√©cution.</p>
                    </div>
                </div>

                <!-- Panneau 5: Commit -->
                <div id="tab5" class="tab-pane">
                    <!-- Bloc Th√©orie -->
                    <div class="mb-6 p-4 bg-gray-50 rounded-lg border border-gray-200">
                        <h2 class="text-2xl font-semibold text-blue-600 mb-4">5. Transformer un Conteneur en Image (Commit)</h2>
                        <ul class="list-disc list-outside space-y-2 pl-5">
                            <li>Si des modifications ont √©t√© faites dans un conteneur (ex: installation d'outils), on peut sauvegarder cet √©tat comme une nouvelle image.</li>
                            <li><strong>Commande :</strong> <code>docker commit &lt;NOM_CONTENEUR&gt; &lt;NOM_NOUVELLE_IMAGE&gt;</code></li>
                            <li><strong class="text-red-600">Attention :</strong> Cette m√©thode n'est pas recommand√©e pour la persistance des donn√©es (on pr√©f√®re les volumes) ou pour cr√©er des images (on pr√©f√®re un <code>Dockerfile</code>). C'est utile pour du d√©bogage ou des sauvegardes rapides.</li>
                        </ul>
                    </div>
                    
                    <!-- Bloc TP -->
                    <div class="mb-6 p-4 bg-green-50 rounded-lg border border-green-200">
                        <h3 class="text-xl font-semibold text-green-800 mb-3">üí° Travaux Pratiques (TP)</h3>
                        <p class="mb-2">Installez l'outil <code>curl</code> dans un conteneur <code>ubuntu</code> et "committez" le changement dans une nouvelle image.</p>
                        <code class="block bg-gray-800 text-white p-3 rounded-md text-sm"># 1. Lancez un conteneur ubuntu interactif
docker run -it --name ubuntu-modifie ubuntu:latest bash

# 2. (Dans le conteneur) Installez curl
# apt-get update && apt-get install -y curl
# exit

# 3. (Sur l'h√¥te) Cr√©ez une image √† partir du conteneur modifi√©
docker commit ubuntu-modifie mon-ubuntu-avec-curl

# 4. V√©rifiez que la nouvelle image existe
docker images | grep mon-ubuntu-avec-curl</code>
                    </div>

                    <!-- Bloc Questionnaire -->
                    <div class="p-4 bg-purple-50 rounded-lg border border-purple-200">
                        <h3 class="text-xl font-semibold text-purple-800 mb-3">‚ùì Questionnaire</h3>
                        <p class="font-medium">Quelle est la m√©thode recommand√©e pour cr√©er des images personnalis√©es (plut√¥t que <code>docker commit</code>) ?</p>
                        <p class="mt-2 text-sm text-gray-700"><strong>R√©ponse :</strong> Utiliser un <code>Dockerfile</code>. Un Dockerfile est un fichier texte qui contient les instructions pour assembler une image de mani√®re reproductible et automatis√©e.</p>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <!-- Script JavaScript pour les onglets -->
    <script>
        function showTab(event, tabId) {
            // Cacher tous les panneaux
            const tabPanes = document.querySelectorAll('.tab-pane');
            tabPanes.forEach(pane => {
                pane.classList.remove('active');
            });

            // D√©sactiver tous les boutons
            const tabButtons = document.querySelectorAll('.tab-button');
            tabButtons.forEach(button => {
                button.classList.remove('active');
            });

            // Afficher le panneau cible
            document.getElementById(tabId).classList.add('active');

            // Activer le bouton cible
            event.currentTarget.classList.add('active');
        }
    </script>

</body>
</html>